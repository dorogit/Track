{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport createDataContext from \"./createDataContext\";\nimport tracker from \"../api/tracker\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar trackReducer = function trackReducer(action, state) {\n  switch (action.type) {\n    case \"SIGN_UP\":\n      console.log(action.payload);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: action.payload\n      });\n    case \"SIGN_IN\":\n      console.log(action.payload);\n    case \"ADD_ERROR\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errorMessage: action.payload\n      });\n    default:\n      return state;\n  }\n};\nvar signUp = function signUp(dispatch) {\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var email = _ref.email,\n        password = _ref.password,\n        callback = _ref.callback;\n      try {\n        var response = yield tracker.post('/signup', {\n          email: email,\n          password: password\n        });\n        console.log(response.data.token);\n        yield AsyncStorage.setItem('token', response.data.token);\n        dispatch({\n          type: \"SIGN_UP\",\n          payload: response.data.token\n        });\n        callback();\n      } catch (error) {\n        console.log(error);\n        dispatch({\n          type: \"ADD_ERROR\",\n          payload: \"Something went wrong\"\n        });\n      }\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nvar signIn = function signIn(dispatch) {\n  return function () {\n    var _ref4 = _asyncToGenerator(function* (_ref3) {\n      var email = _ref3.email,\n        password = _ref3.password,\n        callback = _ref3.callback;\n      console.log(token);\n      try {\n        var response = yield tracker.post('/signin', {\n          email: email,\n          password: password\n        });\n        console.log(response);\n        yield AsyncStorage.setItem('token', response.data.token);\n        dispatch({\n          type: \"SIGN_UP\",\n          payload: response.data.token\n        });\n        callback();\n      } catch (error) {\n        console.log(error);\n        dispatch({\n          type: \"ADD_ERROR\",\n          payload: \"Something went wrong\"\n        });\n      }\n    });\n    return function (_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nvar signOut = function signOut() {};\nvar _createDataContext = createDataContext(trackReducer, {\n    signUp: signUp,\n    signIn: signIn\n  }, {\n    token: null,\n    isSignedIn: false\n  }),\n  Context = _createDataContext.Context,\n  Provider = _createDataContext.Provider;\nexport { Context, Provider };","map":{"version":3,"names":["createDataContext","tracker","AsyncStorage","trackReducer","action","state","type","console","log","payload","_objectSpread","token","errorMessage","signUp","dispatch","_ref2","_asyncToGenerator","_ref","email","password","callback","response","post","data","setItem","error","_x","apply","arguments","signIn","_ref4","_ref3","_x2","signOut","_createDataContext","isSignedIn","Context","Provider"],"sources":["D:/Programming/native/Track/Track-app/src/context/TrackContext.js"],"sourcesContent":["import createDataContext from \"./createDataContext\";\r\nimport tracker from \"../api/tracker\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage'\r\n\r\nconst trackReducer = (action, state) => {\r\n  switch (action.type) {\r\n    case \"SIGN_UP\":\r\n      console.log(action.payload)\r\n      return {...state, token:action.payload}\r\n    case \"SIGN_IN\":\r\n      console.log(action.payload)\r\n    case \"ADD_ERROR\":\r\n      return {...state, errorMessage:action.payload}\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst signUp = (dispatch) => {\r\n  return async ( {email, password, callback} ) => {\r\n    try {\r\n      const response = await tracker.post('/signup', {email:email,password:password})\r\n      console.log(response.data.token)\r\n      await AsyncStorage.setItem('token', response.data.token)\r\n      dispatch({ type: \"SIGN_UP\", payload: response.data.token })\r\n      callback()\r\n    } catch (error) {\r\n      console.log(error)\r\n      dispatch({ type: \"ADD_ERROR\", payload: \"Something went wrong\" })\r\n    }\r\n  }\r\n}\r\n\r\nconst signIn = (dispatch) => {\r\n  return async ( {email, password, callback} ) => {\r\n    console.log(token)\r\n    try {\r\n      const response = await tracker.post('/signin', {email:email, password:password})\r\n      console.log(response)\r\n      await AsyncStorage.setItem('token', response.data.token)\r\n      dispatch({ type: \"SIGN_UP\", payload: response.data.token })\r\n      callback()\r\n    } catch (error) {\r\n      console.log(error)\r\n      dispatch({ type: \"ADD_ERROR\", payload: \"Something went wrong\" })\r\n    }\r\n  }\r\n}\r\n\r\nconst signOut = () =>{\r\n  // get a {email, password}\r\n  //handle success by updating state to IF user is signed in\r\n}\r\n\r\nexport const {Context, Provider} = createDataContext(\r\n  trackReducer,\r\n  { signUp,signIn },\r\n  {token:null, isSignedIn: false}\r\n)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}